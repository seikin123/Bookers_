
<div class='container px-5 px-sm-0'>
<%= render 'books/error', model: @booknew %>
    <div class='row'>
        <div class='col-md-3'>
            <table class='table'>
                <%= render 'users/profile', user: @user %>
            </table>
                
            <div>
                <%= render 'books/form', {book: @booknew, btn: 'Create Book'} %>
            </div>
        </div>

        <div class='col-md-8 offset-md-1'>
                <h2>Books</h2>
                    <table class="table table-hover table-invers">
                    <thead>
                        <th></th>
                        <th>title</th>
                        <th>opinion</th>
                        <th colspan="3"></th>
                            <% @books.each do |book| %>
                        <tr><td>
                            <%= link_to user_path(book.user) do %>
                            <%= attachment_image_tag book.user, :profile_image, size: "40x40",fallback: "no_image.jpg"%>
                            <% end %></td>
                        <td><%= link_to book.title, book_path(book.id) %></td>
                        <td><%= book.body %></td>
                            <td>
                                <% if current_user.already_favorited?(book) %>
                                <%= link_to book_favorites_path(book), method: :delete, remote: true do %>
                                    <i class="fas fa-heart"></i>
                                <% end %>
                                <%= book.favorites.count %>
                                <% else %>
                                <%= link_to book_favorites_path(book), method: :post, remote: true do %>
                                    <i class="far fa-heart"></i>
                                <% end %>
                                <%= book.favorites.count %>
                                <% end %>
                                </td>
                        <% end %>
                        </tr>
                    </table>
                </div>
                    </tr>
                    </thead>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>